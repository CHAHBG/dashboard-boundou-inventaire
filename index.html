<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Interactif - Inventaires Fonciers Boundou</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
</head>
<body>
  <div class="container">
    <header class="dashboard-header">
      <h1>Dashboard Interactif - Inventaires Fonciers Boundou</h1>
      <p class="date">02 Juillet 2025</p>
    </header>

    <section class="filters-panel card">
      <h3>Syst√®me de Filtres</h3>
      <div class="filters-row">
        <div class="filter-group">
          <label class="form-label" for="communeFilter">Commune</label>
          <select id="communeFilter" class="form-control" multiple>
            <option value="all">Toutes les communes</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="form-label" for="seuilFilter">Seuil Min. Parcelles</label>
          <input type="range" id="seuilFilter" class="form-control" min="0" max="12000" value="0">
          <span id="seuilValue">0</span>
        </div>
        <div class="filter-group">
          <label class="form-label" for="performanceFilter">Niveau de Performance</label>
          <select id="performanceFilter" class="form-control">
            <option value="all">Tous</option>
            <option value="high">√âlev√© (>20%)</option>
            <option value="medium">Moyen (10-20%)</option>
            <option value="low">Faible (<10%)</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="form-label">Probl√®mes</label>
          <div class="problem-filters">
            <label class="checkbox-label">
              <input type="checkbox" id="quarantineFilter"> Quarantaines
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="jointureFilter"> √âchecs Jointure
            </label>
          </div>
        </div>
        <div class="filter-group filter-actions">
          <button id="applyFilters" class="btn btn--primary">Appliquer</button>
          <button id="resetFilters" class="btn btn--outline">R√©initialiser</button>
        </div>
      </div>
    </section>

    <section class="kpi-section">
      <div class="kpi-grid">
        <div class="kpi-card card">
          <span class="kpi-icon">üìä</span>
          <div class="kpi-content">
            <h3>Total Parcelles Brutes</h3>
            <p class="kpi-value" id="kpi-brutes">51,799</p>
          </div>
        </div>
        <div class="kpi-card card">
          <span class="kpi-icon">üèòÔ∏è</span>
          <div class="kpi-content">
            <h3>Total Communes</h3>
            <p class="kpi-value" id="kpi-communes">11</p>
          </div>
        </div>
        <div class="kpi-card card">
          <span class="kpi-icon">üîÑ</span>
          <div class="kpi-content">
            <h3>Taux de D√©doublonnage</h3>
            <p class="kpi-value" id="kpi-dedoublonnage">50.5%</p>
          </div>
        </div>
        <div class="kpi-card card">
          <span class="kpi-icon">‚öôÔ∏è</span>
          <div class="kpi-content">
            <h3>Taux Post-traitement</h3>
            <p class="kpi-value" id="kpi-post-traitement">70.8%</p>
          </div>
        </div>
        <div class="kpi-card card">
          <span class="kpi-icon">‚úÖ</span>
          <div class="kpi-content">
            <h3>Taux OK Post-traitement</h3>
            <p class="kpi-value" id="kpi-ok-post-traitement">82.7%</p>
          </div>
        </div>
        <div class="kpi-card card">
          <span class="kpi-icon">‚ö†Ô∏è</span>
          <div class="kpi-content">
            <h3>Parcelles en Quarantaine</h3>
            <p class="kpi-value" id="kpi-quarantaine">337</p>
          </div>
        </div>
      </div>
    </section>

    <section class="charts-section">
      <h2>Graphiques Interactifs</h2>
      <div class="charts-grid">
        <div class="chart-card card">
          <div class="chart-header">
            <h3>Pipeline de Traitement</h3>
            <div class="chart-controls">
              <button class="btn btn--sm chart-btn" data-action="zoom-in">+</button>
              <button class="btn btn--sm chart-btn" data-action="zoom-out">-</button>
              <button class="btn btn--sm chart-btn" data-action="reset-zoom">Reset</button>
              <button class="btn btn--sm chart-btn" data-action="fullscreen">üì±</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="pipelineChart"></canvas>
          </div>
        </div>
        <div class="chart-card card">
          <div class="chart-header">
            <h3>Comparaison par Commune</h3>
            <div class="chart-controls">
              <button class="btn btn--sm chart-btn" data-action="zoom-in">+</button>
              <button class="btn btn--sm chart-btn" data-action="zoom-out">-</button>
              <button class="btn btn--sm chart-btn" data-action="reset-zoom">Reset</button>
              <button class="btn btn--sm chart-btn" data-action="fullscreen">üì±</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="communesChart"></canvas>
          </div>
        </div>
        <div class="chart-card card">
          <div class="chart-header">
            <h3>Taux de Performance</h3>
            <div class="chart-controls">
              <button class="btn btn--sm chart-btn" data-action="zoom-in">+</button>
              <button class="btn btn--sm chart-btn" data-action="zoom-out">-</button>
              <button class="btn btn--sm chart-btn" data-action="reset-zoom">Reset</button>
              <button class="btn btn--sm chart-btn" data-action="fullscreen">üì±</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="performanceChart"></canvas>
          </div>
        </div>
        <div class="chart-card card">
          <div class="chart-header">
            <h3>R√©partition des Parcelles</h3>
            <div class="chart-controls">
              <button class="btn btn--sm chart-btn" data-action="zoom-in">+</button>
              <button class="btn btn--sm chart-btn" data-action="zoom-out">-</button>
              <button class="btn btn--sm chart-btn" data-action="reset-zoom">Reset</button>
              <button class="btn btn--sm chart-btn" data-action="fullscreen">üì±</button>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="repartitionChart"></canvas>
          </div>
        </div>
      </div>
    </section>

    <section class="table-section">
      <div class="table-header">
        <h2>Donn√©es D√©taill√©es par Commune</h2>
        <div class="table-controls">
          <input type="text" id="searchTable" class="form-control" placeholder="Rechercher...">
          <button id="exportBtn" class="btn btn--primary">Exporter CSV</button>
        </div>
      </div>
      <div class="table-container card">
        <table id="communeTable">
          <thead>
            <tr>
              <th data-column="commune" class="sortable" data-tooltip="Nom de la commune">Commune</th>
              <th data-column="parcelles_brutes" class="sortable" data-tooltip="Nombre total de parcelles brutes">Parcelles Brutes</th>
              <th data-column="parcelles_sans_doublons" class="sortable" data-tooltip="Parcelles apr√®s d√©doublonnage">Sans Doublons</th>
              <th data-column="parcelles_post_traitees" class="sortable" data-tooltip="Parcelles apr√®s traitement">Post-trait√©es</th>
              <th data-column="parcelles_ok_post_traitement" class="sortable" data-tooltip="Parcelles valid√©es apr√®s traitement">OK Post-traitement</th>
              <th data-column="parcelles_restantes" class="sortable" data-tooltip="Parcelles non trait√©es ou en attente">Restantes</th>
              <th data-column="parcelles_jointure_ok" class="sortable" data-tooltip="Parcelles avec jointure r√©ussie">Jointure OK</th>
              <th data-column="parcelles_jointure_pas_ok" class="sortable" data-tooltip="Parcelles avec jointure √©chou√©e">Jointure PAS OK</th>
              <th data-column="parcelles_quarantaines" class="sortable" data-tooltip="Parcelles en quarantaine">Quarantaines</th>
              <th data-column="taux_jointure_ok" class="sortable" data-tooltip="Pourcentage de jointures r√©ussies">Taux Jointure</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
      <div class="table-pagination">
        <span id="paginationInfo">Affichage de 0 √† 0 sur 0 entr√©es</span>
        <div class="pagination-controls">
          <button id="prevPage" class="btn page-btn">Pr√©c√©dent</button>
          <div id="pageNumbers"></div>
          <button id="nextPage" class="btn page-btn">Suivant</button>
        </div>
      </div>
    </section>

    <section class="legend-section card">
      <h2>L√©gende et D√©finitions</h2>
      <div class="legend-grid">
        <div class="legend-item">
          <strong>Parcelles Quarantaines:</strong> Parcelles inventori√©es dans la for√™t de Gouloumbou √† Netteboulou
        </div>
        <div class="legend-item">
          <strong>Parcelles OK Post-traitement:</strong> Parcelles valid√©es pour la jointure
        </div>
        <div class="legend-item">
          <strong>Parcelles Restantes:</strong> Parcelles envoy√©es et non post-trait√©es ou transmises √† l'URM
        </div>
        <div class="legend-item">
          <strong>Parcelles Jointure OK:</strong> Parcelles dont la jointure a r√©ussi
        </div>
        <div class="legend-item">
          <strong>Parcelles Jointure PAS OK:</strong> Parcelles dont la jointure a √©chou√© (enqu√™tes non soumises ou supprim√©es par erreur - n√©cessitent une nouvelle enqu√™te socio-fonci√®re)
        </div>
      </div>
    </section>

    <footer class="dashboard-footer">
      <p>¬© 2025 - Dashboard Interactif Inventaire Foncier Boundou - Donn√©es au 02 Juillet 2025</p>
    </footer>
  </div>

  <div id="fullscreenModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Graphique en Plein √âcran</h3>
        <button id="closeModal" class="btn btn--sm">√ó</button>
      </div>
      <div class="modal-body">
        <canvas id="fullscreenChart"></canvas>
      </div>
    </div>
  </div>

  <div id="notifications" class="notifications"></div>
  <div id="tooltip" class="tooltip hidden"></div>

  <script src="app.js"></script>
</body>
</html>
